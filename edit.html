<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dynamic Form Generator</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f9;
        margin: 0;
        padding: 20px;
      }
      h1 {
        color: #333;
      }
      .form-group {
        margin-bottom: 20px;
      }
      .form-input {
        width: 100%;
        padding: 12px;
        margin-top: 5px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-sizing: border-box;
        font-size: 16px;
        background-color: #fff;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
      }
      .form-input:focus {
        border-color: #007bff;
        box-shadow: 0 0 8px rgba(0, 123, 255, 0.2);
      }
      .form-button {
        margin-top: 20px;
        padding: 12px 20px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.3s ease;
      }
      .form-button:hover {
        background-color: #0056b3;
      }
      .form-container {
        background-color: #fff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        max-width: 800px;
        margin: 0 auto;
      }
      textarea {
        padding: 12px;
        border-radius: 5px;
        border: 1px solid #ccc;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        margin-bottom: 20px;
      }
      textarea:focus {
        border-color: #007bff;
        box-shadow: 0 0 8px rgba(0, 123, 255, 0.2);
      }
    </style>
  </head>
  <body>
    <div class="form-container">
      <a href="./index.html">
        <button class="form-button">Home</button>
      </a>
      <h1>Enter JSON Data</h1>
      <textarea
        id="json-input"
        placeholder="Enter JSON data here"
        rows="10"
        style="width: 100%"
      ></textarea>
      <button id="generate-form" class="form-button">Generate Form</button>

      <form id="dynamicForm" style="margin-top: 20px">
        <h1>Generated Form</h1>
        <!-- Dynamically generated form fields will appear here -->
      </form>
    </div>

    <script>
      document
        .getElementById("generate-form")
        .addEventListener("click", function () {
          const jsonInput = document.getElementById("json-input").value;
          const formContainer = document.getElementById("dynamicForm");
          formContainer.innerHTML = "<h1>Generated Form</h1>"; // Reset form contents

          try {
            const jsonData = JSON.parse(jsonInput);

            // Iterate through the keys in the JSON object (strategy names)
            for (let strategyName in jsonData) {
              if (jsonData.hasOwnProperty(strategyName)) {
                const strategy = jsonData[strategyName];

                // Add input for strategy name (instead of h2 tag)
                const strategyNameGroup = document.createElement("div");
                strategyNameGroup.classList.add("form-group");
                strategyNameGroup.innerHTML = `
                  <label for="${strategyName}_name">Strategy Name:</label>
                  <input type="text" id="${strategyName}_name" name="${strategyName}_name" class="form-input" value="${strategyName}">
                `;
                formContainer.appendChild(strategyNameGroup);

                // Create input for 'class' if it exists
                if (strategy.class !== undefined) {
                  const inputGroup = document.createElement("div");
                  inputGroup.classList.add("form-group");
                  inputGroup.innerHTML = `
                <label for="${strategyName}_class">Class:</label>
                <input type="text" id="${strategyName}_class" name="${strategyName}_class" class="form-input" value="${
                    strategy.class || ""
                  }">
            `;
                  formContainer.appendChild(inputGroup);
                }

                // Create input for 'universe'
                if (strategy.universe !== undefined) {
                  const inputGroup = document.createElement("div");
                  inputGroup.classList.add("form-group");
                  inputGroup.innerHTML = `
                <label for="${strategyName}_universe">Universe:</label>
                <input type="text" id="${strategyName}_universe" name="${strategyName}_universe" class="form-input" value="${strategy.universe}">
            `;
                  formContainer.appendChild(inputGroup);
                }

                // Handle filters if they exist
                if (strategy.filters && Array.isArray(strategy.filters)) {
                  strategy.filters.forEach((filter, index) => {
                    const filterGroup = document.createElement("div");
                    filterGroup.classList.add("form-group");

                    // Add input for filter name
                    let filterHtml = `
                    <label for="${strategyName}_filter_${index}_name">Filter ${
                      index + 1
                    }</label>
                    <input type="text" id="${strategyName}_filter_${index}_name" name="${strategyName}_filter_${index}_name" class="form-input" value="${
                      filter.filter
                    }">
                  `;

                    // Loop through the options of the filter
                    for (let optionKey in filter.options) {
                      filterHtml += `
                    <label for="${strategyName}_filter_${index}_${optionKey}">${optionKey}:</label>
                    <input type="text" id="${strategyName}_filter_${index}_${optionKey}" name="${strategyName}_filter_${index}_${optionKey}" class="form-input" value="${filter.options[optionKey]}">
                `;
                    }

                    filterGroup.innerHTML = filterHtml;
                    formContainer.appendChild(filterGroup);
                  });
                }
              }
            }
          } catch (error) {
            alert("Invalid JSON data" + error);
          }
        });
    </script>
  </body>
</html>
